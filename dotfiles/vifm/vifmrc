set vicmd=nvim
set syscalls

set trash
set history=100
set nofollowlinks
set sortnumbers
set undolevels=100
set vimhelp
set norunexec
set timefmt='[%d-%m-%Y %H:%M]'
set wildmenu
set wildstyle=popup
set suggestoptions=normal,visual,view,otherpane,keys,marks,registers
set ignorecase
set smartcase
set nohlsearch
set incsearch
set scrolloff=8

if !has('win')
    set slowfs=curlftpfs
endif

highlight Border      cterm=none   ctermbg=default
highlight Win         cterm=none   ctermbg=default
highlight Directory   cterm=none   ctermbg=default
highlight StatusLine  cterm=none   ctermbg=236
highlight CmdLine     cterm=none   ctermbg=default

highlight TopLine	    cterm=none   ctermfg=yellow      ctermbg=default
highlight TopLineSel	cterm=bold	 ctermfg=235         ctermbg=yellow

highlight User1 ctermbg=yellow ctermfg=235
highlight User2 ctermbg=blue   ctermfg=235   cterm=bold
highlight User3 ctermbg=none   ctermfg=red   cterm=bold
highlight User4 ctermbg=green  ctermfg=235   cterm=bold

set statusline="%1* %t %2* %s %3* %A %d %= %4* %c / %a "

mark h ~/

command! df df -h %m 2> /dev/null
command! diff vim -d %f %F
command! zip zip -r %f.zip %f
command! run !! ./%f
command! make !!make %a
command! mkcd :mkdir %a | cd %a
command! vgrep vim "+grep %a"
command! reload :write | restart full

filetype   *.html,*.js,*.ts,*.tsx,*.json,*.jsx,*.css,*.txt,*.nix,*.flake,*.md,*.lock,*.sh nvim %f
fileviewer *.html,*.js,*.ts,*.tsx,*.json,*.jsx,*.css,*.txt,*.nix,*.flake,*.md,*.lock,*.sh bat --color always --wrap never --pager never %c -p

" Pdf
filetype {*.pdf},<application/pdf> papers %c %i &

" Audio
filetype *.wav,*.mp3,*.flac org.gnome.Decibels %c %i &

" Video
filetype *.avi,*.mp4,*.wmv,*.mkv,*.mpg,*.mpeg,*.webm celluloid %c %i &

" Images
filextype *.bmp,*.jpg,*.jpeg,*.png,*.gif loupe %c %i &,

fileviewer */ tree -L 2 -I .git %c

fileviewer * echo NO PREVIEW AVAILABLE %i

set vifminfo=chistory,state,tui,shistory,
    \phistory,fhistory,dirstack,registers,bookmarks,bmarks

nnoremap s :shell<cr>

" Display sorting dialog
nnoremap S :sort<cr>

" Toggle visibility of preview window
nnoremap w :view<cr>
vnoremap w :view<cr>gv

nnoremap o :!nvim %f<cr>
nnoremap O :!nvim %f<cr>

" Open file in the background using its default program
nnoremap gb :file &<cr>l

" Interaction with system clipboard
if executable('wl-copy')
    " Yank current directory path into primary and selection clipboards
    nnoremap yd :!echo -n %d | wl-copy --primary &&
      \ echo -n %d | wl-copy<cr>
    " Yank current file path into into primary and selection clipboards
    nnoremap yp :!echo -n %c:p | wl-copy --primary &&
      \ echo -n %c:p | wl-copy<cr>
    " Yank current file name into into primary and selection clipboards
    nnoremap yf :!echo -n %c:r | wl-copy --primary &&
      \ echo -n %c:r | wl-copy<cr>
    " Yank current file name into into primary and selection clipboards
    nnoremap ye :!echo -n %c | wl-copy --primary &&
      \ echo -n %c | wl-copy<cr>
    " Yank current file into primary and selection clipboards
    nnoremap yc :!wl-copy -t "text/uri-list" --primary "file://%c:p" &&
      \ wl-copy -t "text/uri-list" "file://%c:p"<cr>
endif

" Mappings for faster renaming
nnoremap I cw<c-a>
nnoremap cc cw<c-u>
nnoremap A cw

" Toggle wrap setting on ,w key
nnoremap ,w :set wrap!<cr>

" Example of standard two-panel file managers mappings

nnoremap <f3> :!less %f<cr>
nnoremap <f4> :edit<cr>
nnoremap <f5> :copy<cr>
nnoremap <f6> :move<cr>
nnoremap <f7> :mkdir<space>
nnoremap <f8> :delete<cr>

" Midnight commander alike mappings
" Open current directory in the other pane
nnoremap <a-i> :sync<cr>
" Open directory under cursor in the other pane
nnoremap <a-o> :sync %c<cr>
" Swap panes
nnoremap <c-u> <c-w>x

nnoremap gh :cd ~<cr>
